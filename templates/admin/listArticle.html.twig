{% extends 'layout.html.twig' %}

{% block title %} Liste des Articles - Admin{% endblock %}

    {% block nav %}
        {% include "inc/nav_admin.html.twig" %}
    {% endblock %}
    {% block body %}

        <h2> FILTRER LES ARTICLES</h2>

        <div>

            <!-- Recherche d'article par nom -->
            <div>
                <label for="search_by_name">Nom de l'article :</label>
                <input type="search" id="search_by_name" value="{{ nameArticle }}" name="search_by_name"
                       placeholder="Taper le nom de l'article">
            </div>
            <!-- Recherche d'article par Catégorie -->
            <div>
                <div>
                    <label for="search_by_category">Catégorie : </label>
                    <select name="search_by_category" id="search_by_category">
                        <option value="">TOUTES LES CATEGORIES</option>
                        {% for category in categories %}
                            <option value="{{ category.id }}">{{ category.nom }}</option>
                        {% endfor %}
                    </select>
                </div>
                <!-- si categorie choisie = Actualité alors choix par accès =true ) -->
                {# ##### TO DO : faire le block if ###### #}
                <p>ACCES :
                <p>
                <div>
                    <input type="radio" id="abonne" name="search_by_access" value="abonne" checked>
                    <label for="abonne">Abonné</label>
                </div>
                <div>
                    <input type="radio" id="libre" name="search_by_access" value="libre" checked>
                    <label for="libre">Libre</label>
                </div>
                <div>
                    <input type="radio" id="lesDeux" name="search_by_access" value="lesDeux" checked>
                    <label for="lesDeux">Les deux</label>
                </div>
            </div>
            <!-- Recherche par thématique -->
            <div>
                <p>Thématique</p>
                <div>
                    <input type="checkbox" id="search_by_them_1" name="search_by_them_1" checked>
                    <label for="search_by_them_1">Mutuelle</label>
                </div>
                <div>
                    <input type="checkbox" id="search_by_them_2" name="search_by_them_2" checked>
                    <label for="search_by_them_2">Prévoyance</label>
                </div>
                <div><input type="checkbox" id="search_by_them_3" name="search_by_them_3" checked>
                    <label for="search_by_them_3">Epargne</label></div>
                <div>
                    <input type="checkbox" id="search_by_them_4" name="search_by_them_4" checked>
                    <label for="search_by_them_4">Retraite</label>
                </div>
                <div><input type="checkbox" id="search_by_them_5" name="search_by_them_5" checked>
                    <label for="search_by_them_5">Impôt</label></div>
                <div><input type="checkbox" id="search_by_them_6" name="search_by_them_6" checked>
                    <label for="search_by_them_6">Succession</label></div>
                <div>
                    <input type="checkbox" id="search_by_them_7" name="search_by_them_7" checked>
                    <label for="search_by_them_7">Autres</label>
                </div>
            </div>
            <!-- Recherche par état de publication -->
            <div>
                <p>Etat : </p>
                <div>
                    <input type="checkbox" id="search_by_state_1" name="search_by_state_1" checked>
                    <label for="search_by_state_1">Créé</label>
                </div>
                <div>
                    <input type="checkbox" id="search_by_state_2" name="search_by_state_2" checked>
                    <label for="search_by_state_2">Publié</label></div>
                <div>
                    <input type="checkbox" id="search_by_state_3" name="search_by_state_3" checked>
                    <label for="search_by_state_3">Archivé</label>
                </div>
            </div>
            <!-- Recherche par date -->

            <div>
                <label for="search_by_creationDate"> Du : </label>
                <input type="date" id="search_by_creationDate"
                       name="search_by_creationDate" value="{{ creationDate }}">

                <label for="search_by_expDate"> au : </label>
                <input type="date" id="search_by_expDate"
                       name="search_by_expDate" value="{{ expDate }}">
            </div>

        </div>
        <div>
            <h2>Liste des Articles</h2>

            <table class="table_listArticle">
                <!-- header du tableau avec le nom des colonnes -->
                <tr class="table_header_listArticles">
                    <th>Nom de l'article</th>
                    <th>Date de création</th>
                    <th>Date d'expiration</th>
                    <th>Description</th>
                    <th>Etat</th>
                    <th>Image</th>
                    <th>Actions</th>
                </tr>
                <!-- boucle permettant de récupérer les articles de la liste
                et d'afficher un article par ligne -->
                {% for article in articles %}

                    <tr>
                        <td class="td_listArticle">{{ article.name }}</td>
                        <td class="td_listArticle">{{ article.creationDate | format_datetime('short','short', locale='fr')}}</td>
                        <td class="td_listArticle">{{ article.expDate | format_datetime('short','short', locale='fr')}}</td>
                        <td class="td_listArticle">{{ article.thematic_id.th_label }}</td>
                        <td class="td_listArticle">{{ article.stateLabel.stateLabel }}</td>
                        <td class="td_listArticle">
                            {% if article.amig != null %}
                                <p>X</p>
                            {% endif %}
                        </td>
                        <td class="td_listArticle"></td>
                        <!-- lien renvoyant sur la vue de l'article côté admin -->
                        <a href="{{ path('/article/{id}', {'id': article.id }) }}"><i class="far fa-eye"></i></a>
                        <!-- lien renvoyant sur la vue de modification de  l'article côté admin -->
                        <a href="{{ path('/edit_article/{id}', {"id" : article.id}) }}"><i class="fas fa-pen"></i></a>
                        <!-- bouton archivage de l'article -->
                        <button type="button"><i class="fas fa-archive"></i></button>
                        <!-- bouton suppression de l'article -->
                        <button type="button"><i class="fas fa-times"></i></button>
                        </td>

                    </tr>
                {% endfor %}
            </table>
        </div>
    {% endblock %}